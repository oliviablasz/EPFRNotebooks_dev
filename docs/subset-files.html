<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>0.7 Subset files | EPFR Strategy Notebooks</title>
  <meta name="description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="0.7 Subset files | EPFR Strategy Notebooks" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://epfr.github.io/EPFR-QuantNotebooks/images/cover-image.png" />
  <meta property="og:description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="github-repo" content="EPFR/EPFR-QuantNotebooks" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="0.7 Subset files | EPFR Strategy Notebooks" />
  
  <meta name="twitter:description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="twitter:image" content="https://epfr.github.io/EPFR-QuantNotebooks/images/cover-image.png" />




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="total-return-index-1.html"/>
<link rel="next" href="model-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/comingsoon.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#signals"><i class="fa fa-check"></i>Signals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr.r-library.html"><a href="epfr.r-library.html"><i class="fa fa-check"></i>EPFR.r Library</a>
<ul>
<li class="chapter" data-level="" data-path="set-up.html"><a href="set-up.html"><i class="fa fa-check"></i>Set-up</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html"><i class="fa fa-check"></i>Strategy Functions</a>
<ul>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#total-return-index"><i class="fa fa-check"></i>Total Return Index</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#compunding-flows"><i class="fa fa-check"></i>Compunding Flows</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#model"><i class="fa fa-check"></i>Model</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#example"><i class="fa fa-check"></i>Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr-data-filters.html"><a href="epfr-data-filters.html"><i class="fa fa-check"></i>EPFR Data &amp; Filters</a>
<ul>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html"><i class="fa fa-check"></i>Video Explanations</a>
<ul>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#asset-class-focus"><i class="fa fa-check"></i>Asset class focus</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#fund-type"><i class="fa fa-check"></i>Fund type</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#investor-type"><i class="fa fa-check"></i>Investor type</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#currency-of-flows"><i class="fa fa-check"></i>Currency of flows</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#fund-domicile-or-geographic-focus"><i class="fa fa-check"></i>Fund domicile or Geographic focus</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#theme"><i class="fa fa-check"></i>Theme</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#sector"><i class="fa fa-check"></i>Sector</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#style"><i class="fa fa-check"></i>Style</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#duration"><i class="fa fa-check"></i>Duration</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#individual-managers"><i class="fa fa-check"></i>Individual managers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="macro-strategies.html"><a href="macro-strategies.html"><i class="fa fa-check"></i>Macro Strategies</a>
<ul>
<li class="chapter" data-level="0.1" data-path="multi-asset-strategy.html"><a href="multi-asset-strategy.html"><i class="fa fa-check"></i><b>0.1</b> Multi-Asset Strategy</a></li>
<li class="chapter" data-level="0.2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>0.2</b> Overview</a></li>
<li class="chapter" data-level="0.3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>0.3</b> Data</a>
<ul>
<li class="chapter" data-level="0.3.1" data-path="data.html"><a href="data.html#aggregations"><i class="fa fa-check"></i><b>0.3.1</b> Aggregations</a></li>
<li class="chapter" data-level="0.3.2" data-path="data.html"><a href="data.html#daily-percentage-flow"><i class="fa fa-check"></i><b>0.3.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="0.3.3" data-path="data.html"><a href="data.html#aggregate-flow-file"><i class="fa fa-check"></i><b>0.3.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="0.3.4" data-path="data.html"><a href="data.html#return-file"><i class="fa fa-check"></i><b>0.3.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="0.4" data-path="strategy-implementation.html"><a href="strategy-implementation.html"><i class="fa fa-check"></i><b>0.4</b> Strategy Implementation</a></li>
<li class="chapter" data-level="0.5" data-path="flow-file.html"><a href="flow-file.html"><i class="fa fa-check"></i><b>0.5</b> Flow file</a>
<ul>
<li class="chapter" data-level="0.5.1" data-path="flow-file.html"><a href="flow-file.html#compounding-flows"><i class="fa fa-check"></i><b>0.5.1</b> Compounding Flows</a></li>
</ul></li>
<li class="chapter" data-level="0.6" data-path="total-return-index-1.html"><a href="total-return-index-1.html"><i class="fa fa-check"></i><b>0.6</b> Total Return Index</a></li>
<li class="chapter" data-level="0.7" data-path="subset-files.html"><a href="subset-files.html"><i class="fa fa-check"></i><b>0.7</b> Subset files</a>
<ul>
<li class="chapter" data-level="0.7.1" data-path="subset-files.html"><a href="subset-files.html#ranking-asset-classes"><i class="fa fa-check"></i><b>0.7.1</b> Ranking Asset Classes</a></li>
</ul></li>
<li class="chapter" data-level="0.8" data-path="model-1.html"><a href="model-1.html"><i class="fa fa-check"></i><b>0.8</b> Model</a>
<ul>
<li class="chapter" data-level="0.8.1" data-path="model-1.html"><a href="model-1.html#performance"><i class="fa fa-check"></i><b>0.8.1</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="fx-strategy.html"><a href="fx-strategy.html"><i class="fa fa-check"></i><b>1</b> FX Strategy</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview-1.html"><a href="overview-1.html"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="data-1.html"><a href="data-1.html"><i class="fa fa-check"></i><b>1.2</b> Data</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="data-1.html"><a href="data-1.html#aggregations-1"><i class="fa fa-check"></i><b>1.2.1</b> Aggregations</a></li>
<li class="chapter" data-level="1.2.2" data-path="data-1.html"><a href="data-1.html#daily-percentage-flow-1"><i class="fa fa-check"></i><b>1.2.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="1.2.3" data-path="data-1.html"><a href="data-1.html#aggregate-flow-file-1"><i class="fa fa-check"></i><b>1.2.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="1.2.4" data-path="data-1.html"><a href="data-1.html#return-file-1"><i class="fa fa-check"></i><b>1.2.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html"><i class="fa fa-check"></i><b>1.3</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#compounding-flows-1"><i class="fa fa-check"></i><b>1.3.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="1.3.2" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#ranking-currencies"><i class="fa fa-check"></i><b>1.3.2</b> Ranking Currencies</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="model-2.html"><a href="model-2.html"><i class="fa fa-check"></i><b>1.4</b> Model</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="model-2.html"><a href="model-2.html#performance-1"><i class="fa fa-check"></i><b>1.4.1</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="flow-percentage-country-strategy.html"><a href="flow-percentage-country-strategy.html"><i class="fa fa-check"></i><b>2</b> Flow-Percentage Country Strategy</a>
<ul>
<li class="chapter" data-level="2.1" data-path="overview-2.html"><a href="overview-2.html"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="data-2.html"><a href="data-2.html"><i class="fa fa-check"></i><b>2.2</b> Data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-2.html"><a href="data-2.html#aggregations-2"><i class="fa fa-check"></i><b>2.2.1</b> Aggregations</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-2.html"><a href="data-2.html#daily-percentage-flow-2"><i class="fa fa-check"></i><b>2.2.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-2.html"><a href="data-2.html#aggregate-flow-file-2"><i class="fa fa-check"></i><b>2.2.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-2.html"><a href="data-2.html#return-file-2"><i class="fa fa-check"></i><b>2.2.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html"><i class="fa fa-check"></i><b>2.3</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#compounding-flows-2"><i class="fa fa-check"></i><b>2.3.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="2.3.2" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#total-return-index-2"><i class="fa fa-check"></i><b>2.3.2</b> Total Return Index</a></li>
<li class="chapter" data-level="2.3.3" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#ranking-countries"><i class="fa fa-check"></i><b>2.3.3</b> Ranking Countries</a></li>
<li class="chapter" data-level="2.3.4" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#model-3"><i class="fa fa-check"></i><b>2.3.4</b> Model</a></li>
<li class="chapter" data-level="2.3.5" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#performance-2"><i class="fa fa-check"></i><b>2.3.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="flow-percentage-sector-strategy.html"><a href="flow-percentage-sector-strategy.html"><i class="fa fa-check"></i><b>3</b> Flow-Percentage Sector Strategy</a>
<ul>
<li class="chapter" data-level="3.1" data-path="overview-3.html"><a href="overview-3.html"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="data-3.html"><a href="data-3.html"><i class="fa fa-check"></i><b>3.2</b> Data</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-3.html"><a href="data-3.html#aggregations-3"><i class="fa fa-check"></i><b>3.2.1</b> Aggregations</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-3.html"><a href="data-3.html#daily-percentage-flow-3"><i class="fa fa-check"></i><b>3.2.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-3.html"><a href="data-3.html#aggregate-flow-file-3"><i class="fa fa-check"></i><b>3.2.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-3.html"><a href="data-3.html#return-file-3"><i class="fa fa-check"></i><b>3.2.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html"><i class="fa fa-check"></i><b>3.3</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#compounding-flows-3"><i class="fa fa-check"></i><b>3.3.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="3.3.2" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#total-return-index-3"><i class="fa fa-check"></i><b>3.3.2</b> Total Return Index</a></li>
<li class="chapter" data-level="3.3.3" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#ranking-sectors"><i class="fa fa-check"></i><b>3.3.3</b> Ranking Sectors</a></li>
<li class="chapter" data-level="3.3.4" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#model-4"><i class="fa fa-check"></i><b>3.3.4</b> Model</a></li>
<li class="chapter" data-level="3.3.5" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#performance-3"><i class="fa fa-check"></i><b>3.3.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="activepassive-country-strategy.html"><a href="activepassive-country-strategy.html"><i class="fa fa-check"></i><b>4</b> Active/Passive Country Strategy</a>
<ul>
<li class="chapter" data-level="4.1" data-path="overview-4.html"><a href="overview-4.html"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="data-4.html"><a href="data-4.html"><i class="fa fa-check"></i><b>4.2</b> Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-4.html"><a href="data-4.html#aggregations-4"><i class="fa fa-check"></i><b>4.2.1</b> Aggregations</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-4.html"><a href="data-4.html#activepassive-indicator-1"><i class="fa fa-check"></i><b>4.2.2</b> Active/Passive Indicator</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-4.html"><a href="data-4.html#aggregate-indicator-file"><i class="fa fa-check"></i><b>4.2.3</b> Aggregate Indicator File</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-4.html"><a href="data-4.html#return-file-4"><i class="fa fa-check"></i><b>4.2.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html"><i class="fa fa-check"></i><b>4.3</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#moving-sum-of-indicator"><i class="fa fa-check"></i><b>4.3.1</b> Moving Sum of Indicator</a></li>
<li class="chapter" data-level="4.3.2" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#total-return-index-4"><i class="fa fa-check"></i><b>4.3.2</b> Total Return Index</a></li>
<li class="chapter" data-level="4.3.3" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#ranking-countries-1"><i class="fa fa-check"></i><b>4.3.3</b> Ranking Countries</a></li>
<li class="chapter" data-level="4.3.4" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#model-5"><i class="fa fa-check"></i><b>4.3.4</b> Model</a></li>
<li class="chapter" data-level="4.3.5" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#performance-4"><i class="fa fa-check"></i><b>4.3.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="activepassive-sector-strategy.html"><a href="activepassive-sector-strategy.html"><i class="fa fa-check"></i><b>5</b> Active/Passive Sector Strategy</a>
<ul>
<li class="chapter" data-level="5.1" data-path="overview-5.html"><a href="overview-5.html"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="data-5.html"><a href="data-5.html"><i class="fa fa-check"></i><b>5.2</b> Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-5.html"><a href="data-5.html#aggregations-5"><i class="fa fa-check"></i><b>5.2.1</b> Aggregations</a></li>
<li class="chapter" data-level="5.2.2" data-path="data-5.html"><a href="data-5.html#activepassive-indicator-2"><i class="fa fa-check"></i><b>5.2.2</b> Active/Passive Indicator</a></li>
<li class="chapter" data-level="5.2.3" data-path="data-5.html"><a href="data-5.html#aggregate-indicator-file-1"><i class="fa fa-check"></i><b>5.2.3</b> Aggregate Indicator File</a></li>
<li class="chapter" data-level="5.2.4" data-path="data-5.html"><a href="data-5.html#return-file-5"><i class="fa fa-check"></i><b>5.2.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html"><i class="fa fa-check"></i><b>5.3</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#moving-sum-of-indicator-1"><i class="fa fa-check"></i><b>5.3.1</b> Moving Sum of Indicator</a></li>
<li class="chapter" data-level="5.3.2" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#total-return-index-5"><i class="fa fa-check"></i><b>5.3.2</b> Total Return Index</a></li>
<li class="chapter" data-level="5.3.3" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#ranking-sectors-1"><i class="fa fa-check"></i><b>5.3.3</b> Ranking Sectors</a></li>
<li class="chapter" data-level="5.3.4" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#model-6"><i class="fa fa-check"></i><b>5.3.4</b> Model</a></li>
<li class="chapter" data-level="5.3.5" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#performance-5"><i class="fa fa-check"></i><b>5.3.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flow-percentage-dm-rates-strategy.html"><a href="flow-percentage-dm-rates-strategy.html"><i class="fa fa-check"></i><b>6</b> Flow-Percentage DM Rates Strategy</a>
<ul>
<li class="chapter" data-level="6.1" data-path="overview-6.html"><a href="overview-6.html"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="data-6.html"><a href="data-6.html"><i class="fa fa-check"></i><b>6.2</b> Data</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data-6.html"><a href="data-6.html#aggregations-6"><i class="fa fa-check"></i><b>6.2.1</b> Aggregations</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-6.html"><a href="data-6.html#daily-percentage-flow-4"><i class="fa fa-check"></i><b>6.2.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="6.2.3" data-path="data-6.html"><a href="data-6.html#aggregate-flow-file-4"><i class="fa fa-check"></i><b>6.2.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="6.2.4" data-path="data-6.html"><a href="data-6.html#return-file-6"><i class="fa fa-check"></i><b>6.2.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html"><i class="fa fa-check"></i><b>6.3</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#compounding-flows-4"><i class="fa fa-check"></i><b>6.3.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="6.3.2" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#ranking-countries-2"><i class="fa fa-check"></i><b>6.3.2</b> Ranking Countries</a></li>
<li class="chapter" data-level="6.3.3" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#model-7"><i class="fa fa-check"></i><b>6.3.3</b> Model</a></li>
<li class="chapter" data-level="6.3.4" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#performance-6"><i class="fa fa-check"></i><b>6.3.4</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i>FAQ</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#returns-information"><i class="fa fa-check"></i>Returns Information</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#country-flows"><i class="fa fa-check"></i>Country Flows</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://epfr.com/" target="blank">EPFR</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EPFR Strategy Notebooks</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="subset-files" class="section level2 hasAnchor" number="0.7">
<h2><span class="header-section-number">0.7</span> Subset files<a href="subset-files.html#subset-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Then, to subset the flow file <span class="math inline">\(x\)</span> and return file <span class="math inline">\(y\)</span> to the selected universe <span class="math inline">\(idx\)</span> of asset classes, the following code is used. During this process, we also ensure that the data structure in <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> are completely aligned, having the same column names in the same order.</p>
<!-- An additional step that we take when backtesting the entire multi asset universe is to make an adjustment to all daily flows, based on a regression between each asset classes 20-day flows and MSCI World index returns.  -->
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="subset-files.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (idx <span class="sc">==</span> <span class="st">&quot;Rgn&quot;</span>) { </span>
<span id="cb23-2"><a href="subset-files.html#cb23-2" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x[, <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb23-3"><a href="subset-files.html#cb23-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> y[, <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb23-4"><a href="subset-files.html#cb23-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (idx <span class="sc">==</span> <span class="st">&quot;FI&quot;</span>) {   </span>
<span id="cb23-5"><a href="subset-files.html#cb23-5" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x[, <span class="dv">8</span><span class="sc">:</span><span class="fu">dim</span>(x)[<span class="dv">2</span>]]</span>
<span id="cb23-6"><a href="subset-files.html#cb23-6" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> y[, <span class="dv">8</span><span class="sc">:</span><span class="fu">dim</span>(y)[<span class="dv">2</span>]]</span>
<span id="cb23-7"><a href="subset-files.html#cb23-7" aria-hidden="true" tabindex="-1"></a>}  </span></code></pre></div>
<p><em>* Note: subsetting can also be done when creating the flow and return files</em></p>
<div id="ranking-asset-classes" class="section level3 hasAnchor" number="0.7.1">
<h3><span class="header-section-number">0.7.1</span> Ranking Asset Classes<a href="subset-files.html#ranking-asset-classes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, we sort each of the asset classes in our universe into five equal bins based on their compounded percentage flow values for the selected holding period. To do this, we will use the function from <code>library('EPFR.r')</code>, called <code>bbk()</code>. This function will output a standardized backtest result.</p>
<p>The <code>bbk()</code> function requires our daily percentage flow data compounded over a desired period and the total return index data. Please refer to the library documentation for the complete list of parameters of this function (tip: <code>?bbk()</code>).</p>
<p>The first parameter we add is the number of bins we want to use. For our case, we want to use 5 because our strategy is to go long the top fifth and short the bottom fifth.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="subset-files.html#cb24-1" aria-hidden="true" tabindex="-1"></a>nBin <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="co"># NUMBER OF BINS</span></span></code></pre></div>
<p>Since EPFR data is published with a T+1 day lag and is released around 5:00 pm EST, we account for a T+2 day delay in our model. Users interested in more timely signals can also use the T+2 open prices for backtesting purposes. Alternatively, EPFR’s Premium Daily offering collects an earlier release of end-of-day data which includes a significant subset of its original fund-level flow information.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="subset-files.html#cb25-1" aria-hidden="true" tabindex="-1"></a>delay <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="co"># DELAY IN KNOWING DATA (IN WEEKDAYS) - data takes time to have</span></span></code></pre></div>
<p>It is also important to note that this model will need to be re-balanced weekly. The day of the week the rebalancing occurs is at the user’s discretion. For this example, we will set the day of the week to trade as <strong>Friday</strong>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="subset-files.html#cb26-1" aria-hidden="true" tabindex="-1"></a>doW <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="co"># DAY OF THE WEEK YOU WILL TRADE ON (5 = FRIDAYS)</span></span></code></pre></div>
<p>Additionally, we also evaluate the returns for different holding periods. The user can input the return horizons that they are interested in here. For this example, we define a return horizon for weekly, fortnightly, monthly, bi-monthly, quarterly, and semi-annual rebalancing.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="subset-files.html#cb27-1" aria-hidden="true" tabindex="-1"></a>hz <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">130</span>) <span class="co"># RETURN HORIZON (IN WEEKDAYS) - holding periods</span></span></code></pre></div>
<p>Now that we have defined all of our inputs, to rank the asset classes into quintiles by their 20-day percentage flow, we call the function <code>bbk()</code> for a one-week holding period.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="subset-files.html#cb28-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">bbk</span>(x, y, <span class="dv">1</span>, hz[<span class="dv">1</span>], nBin, doW, T, <span class="dv">0</span>, delay)</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="total-return-index-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/EPFR/EPFR-QuantNotebooks/docs/01-Macro.Rmd",
"text": "Suggest an edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
